<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quantum Leap: The Future of Computing</title>
    
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Load Google Font (Inter) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;700;900&display=swap" rel="stylesheet">

    <style>
        /* Custom Styles */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #111827; /* gray-900 */
            color: #d1d5db; /* gray-300 */
        }

        /* --- Simple Card Hover Effect --- */
        .card-hover {
            border: 1px solid #374151; /* gray-700 */
            transition: all 0.3s ease-in-out;
        }

        .card-hover:hover {
            border-color: #a78bfa; /* violet-400 */
            transform: translateY(-5px);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }

        /* --- Tab Styling --- */
        .tab-btn {
            background-color: #1f2937; /* gray-800 */
            border: 1px solid #374151; /* gray-700 */
            transition: all 0.3s ease;
        }
        .tab-btn.active {
            background-color: #8b5cf6; /* violet-500 */
            color: white;
            border-color: #a78bfa; /* violet-400 */
        }
        .tab-btn:hover:not(.active) {
            background-color: #374151; /* gray-700 */
        }

        /* --- Quiz Styles --- */
        .quiz-question {
            background-color: #1f2937; /* gray-800 */
            padding: 1.5rem;
            border-radius: 0.5rem;
            border: 1px solid #374151; /* gray-700 */
            margin-bottom: 1rem;
        }
        .quiz-option {
            display: block;
            background-color: #374151; /* gray-700 */
            padding: 0.75rem 1rem;
            border-radius: 0.25rem;
            margin-top: 0.5rem;
            cursor: pointer;
            transition: background-color 0.2s ease;
        }
        .quiz-option:hover {
            background-color: #4b5563; /* gray-600 */
        }
        .quiz-option input {
            margin-right: 0.75rem;
        }
        .quiz-results-correct {
            color: #34d399; /* emerald-400 */
            font-weight: bold;
        }
        .quiz-results-incorrect {
            color: #f87171; /* red-400 */
            font-weight: bold;
        }
    </style>
</head>
<body class="overflow-x-hidden">

    <!-- Header / Navigation -->
    <header class="bg-gray-900/80 backdrop-blur-md sticky top-0 z-50 border-b border-gray-800">
        <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
            <a href="#" class="text-2xl font-bold text-violet-400">
                Quantum Computing
            </a>
            
            <!-- Desktop Menu -->
            <div class="hidden md:flex space-x-6 text-gray-200">
                <a href="#intro" class="hover:text-violet-400 transition-colors">What is Quantum?</a>
                <a href="#concepts" class="hover:text-violet-400 transition-colors">Core Concepts</a>
                <a href="#impact" class="hover:text-violet-400 transition-colors">The Impact</a>
                <a href="#lab" class="hover:text-violet-400 transition-colors">Visualizing</a>
            </div>

            <!-- Mobile Menu Button -->
            <button id="menu-btn" class="md:hidden z-50">
                <div class="space-y-1.5">
                    <span class="block w-6 h-0.5 bg-gray-200"></span>
                    <span class="block w-6 h-0.5 bg-gray-200"></span>
                    <span class="block w-6 h-0.5 bg-gray-200"></span>
                </div>
            </button>
        </nav>

        <!-- Mobile Menu -->
        <div id="mobile-menu" class="md:hidden hidden absolute top-0 left-0 w-full h-screen bg-gray-900 flex flex-col items-center justify-center space-y-8 text-2xl">
            <a href="#intro" class="mobile-menu-link hover:text-violet-400">What is Quantum?</a>
            <a href="#concepts" class="mobile-menu-link hover:text-violet-400">Core Concepts</a>
            <a href="#impact" class="mobile-menu-link hover:text-violet-400">The Impact</a>
            <a href="#lab" class="mobile-menu-link hover:text-violet-400">Visualizing</a>
        </div>
    </header>

    <main>
        <!-- Hero Section -->
        <section id="hero" class="h-[80vh] flex items-center justify-center text-center bg-gray-900 relative">
            <div class="z-10 p-6">
                <h1 class="text-5xl md:text-7xl font-black text-white mb-6">
                    <span class="text-violet-400">Unlock</span>
                    <span class="block">a New Reality</span>
                </h1>
                <p class="text-lg md:text-xl text-gray-300 max-w-2xl mx-auto mb-8">
                    Discover the world of quantum computing, where bits become qubits and the impossible becomes possible.
                </p>
                <a href="#intro" class="px-8 py-3 bg-violet-600 text-white font-semibold rounded-lg shadow-lg shadow-violet-600/30 hover:bg-violet-500 transition-all transform hover:scale-105">
                    Start the Journey
                </a>
            </div>
        </section>

        <!-- Section 5: AI-Generated Quiz -->
        <section id="quiz" class="py-20 lg:py-32 bg-gray-900"> <!-- Changed background for contrast -->
            <div class="container mx-auto px-6 text-center">
                <div class="max-w-3xl mx-auto">
                    <h2 class="text-3xl md:text-4xl font-bold text-white mb-4">AI-Generated Quiz</h2>
                    <p class="text-lg text-gray-400 mb-8">
                        Test your knowledge! Our AI will generate a few questions for you based on what you've just learned.
                    </p>
                    
                    <button id="generate-quiz-btn" class="px-8 py-3 bg-cyan-600 text-white font-semibold rounded-lg shadow-lg shadow-cyan-600/30 hover:bg-cyan-500 transition-all transform hover:scale-105">
                        Generate Quiz
                    </button>

                    <div id="quiz-container" class="mt-8 text-left hidden">
                        <!-- Questions will be injected here by JS -->
                    </div>

                    <button id="submit-quiz-btn" class="hidden mt-8 px-8 py-3 bg-violet-600 text-white font-semibold rounded-lg shadow-lg shadow-violet-600/30 hover:bg-violet-500 transition-all">
                        Submit Quiz
                    </button>

                    <div id="quiz-results" class="mt-8 text-xl">
                        <!-- Results will be shown here -->
                    </div>
                </div>
            </div>
        </section>

    </main>

    <!-- Footer -->
    <footer class="py-12 bg-gray-900 border-t border-gray-800">
        <div class="container mx-auto px-6 text-center text-gray-500">
            <p>&copy; 2025 Quantum Leap. Exploring the next frontier of computation.</p>
            <p class="text-sm mt-2">This is a conceptual website designed for educational purposes.</p>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', () => {

            // --- Mobile Menu ---
            const menuBtn = document.getElementById('menu-btn');
            const mobileMenu = document.getElementById('mobile-menu');
            const mobileMenuLinks = document.querySelectorAll('.mobile-menu-link');

            const toggleMenu = () => {
                mobileMenu.classList.toggle('hidden');
                // Prevent scrolling when menu is open
                document.body.style.overflow = mobileMenu.classList.contains('hidden') ? 'auto' : 'hidden';
            };

            menuBtn.addEventListener('click', toggleMenu);
            // Close menu when a link is clicked
            mobileMenuLinks.forEach(link => {
                link.addEventListener('click', toggleMenu);
            });

            // --- Tabbed Interface for Core Concepts ---
            const tabButtons = document.querySelectorAll('.tab-btn');
            const tabContents = document.querySelectorAll('.tab-content');

            tabButtons.forEach(button => {
                button.addEventListener('click', () => {
                    // Get tab to show
                    const tabId = button.getAttribute('data-tab');

                    // Update button active state
                    tabButtons.forEach(btn => btn.classList.remove('active'));
                    button.classList.add('active');

                    // Show/hide content
                    tabContents.forEach(content => {
                        if (content.id === tabId) {
                            content.classList.remove('hidden');
                        } else {
                            content.classList.add('hidden');
                        }
                    });
                });
            });

            // All "overpowered" JS (IntersectionObserver, Qubit Lab) has been removed.

            // --- AI Quiz Section ---
            const generateBtn = document.getElementById('generate-quiz-btn');
            const submitBtn = document.getElementById('submit-quiz-btn');
            const quizContainer = document.getElementById('quiz-container');
            const quizResults = document.getElementById('quiz-results');

            let quizData = []; // To store the generated quiz questions and answers

            // 1. Function to call Gemini API
            async function generateQuiz() {
                generateBtn.disabled = true;
                quizResults.textContent = 'Generating quiz, please wait...';
                quizContainer.innerHTML = ''; // Clear old quiz
                submitBtn.classList.add('hidden');

                const systemPrompt = `You are a helpful AI assistant creating a quiz.
You will generate a short, 3-question multiple-choice quiz about Quantum Computing.
The questions must be based on the content of the webpage which includes sections on:
- What is Quantum? (Bits vs Qubits)
- Core Concepts (Superposition, Entanglement, Interference)
- The Impact (Medicine, Cryptography, AI)
- Visualizing a Qubit (Superposition vs Collapsed)

The questions should be clear, beginner-friendly, and suitable for someone under 18.
Each question must have 3 multiple-choice options.
One of the options must be the correct answer.
Return ONLY the JSON object as specified in the schema.`;
                
                const userQuery = "Generate the 3-question quiz now.";

                const quizSchema = {
                    type: "OBJECT",
                    properties: {
                        "quiz": {
                            "type": "ARRAY",
                            "items": {
                                "type": "OBJECT",
                                "properties": {
                                    "question": { "type": "STRING", "description": "The quiz question." },
                                    "options": {
                                        "type": "ARRAY",
                                        "description": "An array of 3 string options.",
                                        "items": { "type": "STRING" }
                                    },
                                    "correctAnswer": { "type": "STRING", "description": "The exact text of the correct option." }
                                },
                                "required": ["question", "options", "correctAnswer"]
                            }
                        }
                    },
                    required: ["quiz"]
                };

                const payload = {
                    contents: [
                        { role: "user", parts: [{ text: userQuery }] }
                    ],
                    systemInstruction: {
                        parts: [{ text: systemPrompt }]
                    },
                    generationConfig: {
                        responseMimeType: "application/json",
                        responseSchema: quizSchema,
                        temperature: 0.8, // Add some creativity
                        topP: 0.9
                    }
                };

                const apiKey = "AIzaSyDApEPjAOmc7EcnQc2RWxOTygF6P-HO4xk"; // API key is left blank
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`;

                try {
                    // Exponential backoff setup
                    let response;
                    let delay = 1000;
                    for (let i = 0; i < 5; i++) { // Retry up to 5 times
                        response = await fetch(apiUrl, {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify(payload)
                        });

                        if (response.status === 429 || response.status >= 500) {
                            // Wait and retry for rate limiting or server errors
                            await new Promise(res => setTimeout(res, delay));
                            delay *= 2;
                        } else if (response.ok) {
                            break; // Success
                        } else {
                            // Other client-side errors
                            throw new Error(`API error: ${response.statusText}`);
                        }
                    }

                    if (!response || !response.ok) {
                        throw new Error(`Failed to fetch quiz after retries. Status: ${response ? response.status : 'unknown'}`);
                    }

                    const result = await response.json();

                    const jsonText = result.candidates?.[0]?.content?.parts?.[0]?.text;
                    if (!jsonText) {
                        throw new Error("Invalid response from AI. No content part found.");
                    }

                    const parsedData = JSON.parse(jsonText);
                    
                    if (parsedData.quiz && parsedData.quiz.length > 0) {
                        quizData = parsedData.quiz;
                        renderQuiz(quizData);
                        quizResults.textContent = ''; // Clear loading message
                        generateBtn.classList.add('hidden'); // Hide generate button
                        submitBtn.classList.remove('hidden'); // Show submit button
                        quizContainer.classList.remove('hidden'); // Show quiz
                    } else {
                        throw new Error("AI returned empty or invalid quiz data.");
                    }

                } catch (error) {
                    console.error("Error generating quiz:", error);
                    quizResults.textContent = 'Sorry, we couldn\'t generate a quiz. Please try again later.';
                    generateBtn.disabled = false;
                }
            }

            // 2. Function to render the quiz
            function renderQuiz(questions) {
                quizContainer.innerHTML = ''; // Clear previous quiz
                questions.forEach((q, index) => {
                    const questionElement = document.createElement('div');
                    questionElement.className = 'quiz-question';
                    
                    let optionsHtml = '';
                    // Randomize options order for display
                    const shuffledOptions = [...q.options].sort(() => Math.random() - 0.5);

                    shuffledOptions.forEach((option) => {
                        // Sanitize option value to be safe for HTML attribute
                        const optionValue = option.replace(/"/g, '&quot;');
                        optionsHtml += `
                            <label class="quiz-option">
                                <input type="radio" name="question-${index}" value="${optionValue}">
                                ${option}
                            </label>
                        `;
                    });

                    questionElement.innerHTML = `
                        <p class="font-bold text-lg mb-4">${index + 1}. ${q.question}</p>
                        ${optionsHtml}
                    `;
                    quizContainer.appendChild(questionElement);
                });
            }

            // 3. Function to check answers
            function checkAnswers() {
                let score = 0;
                quizResults.innerHTML = ''; // Clear previous results
                
                quizData.forEach((q, index) => {
                    const selectedOption = document.querySelector(`input[name="question-${index}"]:checked`);
                    const resultElement = document.createElement('div');
                    resultElement.className = 'mb-2';

                    if (selectedOption) {
                        if (selectedOption.value === q.correctAnswer) {
                            score++;
                            resultElement.innerHTML = `Question ${index + 1}: <span class="quiz-results-correct">Correct!</span>`;
                        } else {
                            resultElement.innerHTML = `Question ${index + 1}: <span class="quiz-results-incorrect">Incorrect.</span> The correct answer was: "${q.correctAnswer}"`;
                        }
                    } else {
                        resultElement.innerHTML = `Question ${index + 1}: <span class="quiz-results-incorrect">No answer selected.</span> The correct answer was: "${q.correctAnswer}"`;
                    }
                    quizResults.appendChild(resultElement);
                });

                const scoreElement = document.createElement('p');
                scoreElement.className = 'text-2xl font-bold mt-6';
                scoreElement.textContent = `You scored ${score} out of ${quizData.length}!`;
                quizResults.prepend(scoreElement);

                submitBtn.classList.add('hidden');
                generateBtn.classList.remove('hidden'); // Show generate button again
                generateBtn.disabled = false;
                generateBtn.textContent = 'Generate New Quiz'; // Change button text
            }

            // 4. Add event listeners
            generateBtn.addEventListener('click', generateQuiz);
            submitBtn.addEventListener('click', checkAnswers);

        });
    </script>
</body>
</html>
